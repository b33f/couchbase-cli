'\" t
.\"     Title: couchbase-cli-backup-service-instance
.\"    Author: Couchbase
.\" Generator: Asciidoctor 2.0.10
.\"      Date: 2020-07-13
.\"    Manual: Couchbase CLI Manual
.\"    Source: Couchbase CLI 1.0.0
.\"  Language: English
.\"
.TH "COUCHBASE\-CLI\-BACKUP\-SERVICE\-INSTANCE" "1" "2020-07-13" "Couchbase CLI 1.0.0" "Couchbase CLI Manual"
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.ss \n[.ss] 0
.nh
.ad l
.de URL
\fI\\$2\fP <\\$1>\\$3
..
.als MTO URL
.if \n[.g] \{\
.  mso www.tmac
.  am URL
.    ad l
.  .
.  am MTO
.    ad l
.  .
.  LINKSTYLE blue R < >
.\}
.SH "NAME"
couchbase\-cli\-backup\-service\-instance \- Manage the backup service instances.
.SH "SYNOPSIS"
.sp
.sp
.nf
_couchbase\-cli backup\-service [\-\-cluster <url>] [\-\-username <user>]
    [\-\-password <password>] [\-\-output] instance [\-\-list] [\-\-get]
    [\-\-id <id>] [\-\-state <state>]
.fi
.br
.SH "DESCRIPTION"
.sp
Manage backup service instances
.SH "OPTIONS"
.sp
\-\-list
.RS 4
List the backup instances.
.RE
.sp
\-\-get
.RS 4
Get a specific backup instance.
.RE
.SH "OPTIONS"
.sp
\-\-id <id>
.RS 4
Specify the instance id.
.RE
.sp
\-\-state <state>
.RS 4
Specifies the instance state. Valid states are \(aqactive\(aq, \(aqarchived\(aq or \(aqimported\(aq
.RE
.SH "HOST FORMATS"
.sp
When specifying a host for the couchbase\-cli command the following formats are expected:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.  sp -1
.  IP \(bu 2.3
.\}
\f(CRcouchbase://<addr>\fP
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.  sp -1
.  IP \(bu 2.3
.\}
\f(CR<addr>:<port>\fP
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.  sp -1
.  IP \(bu 2.3
.\}
\f(CRhttp://<addr>:<port>\fP
.RE
.sp
It is recommended to use the couchbase://<addr> format for standard
installations. The other two formats allow an option to take a port number which
is needed for non\-default installations where the admin port has been set up on
a port other that 8091.
.SH "EXAMPLES"
.sp
To retrieve a summary of all instances run:
.sp
.if n .RS 4
.nf
$ couchbase\-cli backup\-service \-c 127.0.0.1:8091 \-u Administrator \-p password \(rs
  instance \-\-list
ID            | State    | Profile | Healthy | Repository"
\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
weekly\-all    | active   | _weekly |  True   | a8059549\-7fc3\-401a\-8fb8\-008d1e20f1b0
old\-data      | archived | _daily  |  True   | d6ccec04\-6f03\-4599\-94c5\-b95ac10a4f80
test\-data\-set | imported | N/A     |  True   | provider
.fi
.if n .RE
.sp
You can also filter to only get instances in certain state by using the \f(CR\-\-state\fP flag. If you want more in\-depth
details for the instance use the JSON output as can be seen below:
.sp
To set the backup service configuration use the \f(CR\-\-set\fP flag and any of the configuration flags for example:
.sp
.if n .RS 4
.nf
$ couchbase\-cli backup\-service \-c 127.0.0.1:8091 \-u Administrator \-p password  \-\-output json \(rs
  instance \-\-list \-\-state active
{
  "active": [
    {
      "id": "weekly\-all",
      "profile_name": "_weekly",
      "state": "active",
      "archive": "/backup",
      "repo": "a8059549\-7fc3\-401a\-8fb8\-008d1e20f1b0",
      "scheduled": {
        "backup_monday_full": {
          "name": "backup_monday_full",
          "task_type": "BACKUP",
          "next_run": "2020\-07\-13T22:00:00+01:00"
        },
        "backup_wednesday": {
          "name": "backup_wednesday",
          "task_type": "BACKUP",
          "next_run": "2020\-07\-15T22:00:00+01:00"
        },
        "merge_week": {
          "name": "merge_week",
          "task_type": "MERGE",
          "next_run": "2020\-07\-12T23:20:00+01:00"
        }
      },
      "version": 1,
      "health": {
        "healthy": true
      },
      "creation_time": "2020\-07\-10T07:44:18.826195+01:00",
      "update_time": "2020\-07\-10T07:44:18.826195+01:00"
    }
  ]
}
.fi
.if n .RE
.sp
To retrieve just the information for one instance used instead the \f(CR\-\-get\fP action flag as
illustrated below.
.sp
.if n .RS 4
.nf
$ couchbase\-cli backup\-service \-c http://127.0.0.1:8091 \-u Administrator \-p password \(rs
  instance \-\-get \-\-id weekly\-all \-\-state active
ID: weekly\-all
State: active
Healthy: True
Archive: /backup
Repository: a8059549\-7fc3\-401a\-8fb8\-008d1e20f1b0
Profile: _weekly
Creation time: 2020\-07\-10T07:44:18.826195+01:00

Scheduled tasks:
Name               | Task type | Next run
\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
backup_monday_full | Backup    | 2020\-07\-13T22:00:00+01:00
backup_wednesday   | Backup    | 2020\-07\-15T22:00:00+01:00
merge_week         | Merge     | 2020\-07\-12T23:20:00+01:00
.fi
.if n .RE
.sp
As before you can retrieve all details in JSON format by using \f(CR\-\-output json\fP before the
instance subcommand.
.SH "ENVIRONMENT AND CONFIGURATION VARIABLES"
.sp
CB_REST_USERNAME
.RS 4
Specifies the username to use when executing the command. This environment
variable allows you to specify a default argument for the \-u/\-\-username
argument on the command line.
.RE
.sp
CB_REST_PASSWORD
.RS 4
Specifies the password of the user executing the command. This environment
variable allows you to specify a default argument for the \-p/\-\-password
argument on the command line. It also allows the user to ensure that their
password are not cached in their command line history.
.RE
.SH "SEE ALSO"
.sp
\fBcouchbase\-cli\-backup\-service\fP(1)
.SH "COUCHBASE\-CLI"
.sp
Part of the \fBcouchbase\-cli\fP(1) suite
.SH "AUTHOR"
.sp
Couchbase